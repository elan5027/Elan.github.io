---
layout: post
bigtitle:  "팀프로젝트 결제 시스템 로직에 대한 고민"
subtitle:   "project"
categories:
    - project
    - team
tags:
  - project
  - team
comments: true
published: true
---
# 팀프로젝트 결제 시스템 로직에 대한 고민

팀 프로젝트에 펀딩 기능이 들어감으로 특이성이 발생햇다.

해당 기능은 팀원인 지명님이 담당하게 되었지만 상황의 특수성으로 같이 고민을 하게 되었다.

1. 와디즈 같은 펀딩을 목적으로한 페이지의 레퍼런스 참고.

- 해당 페이지들은 펀딩 시 펀딩 마감일을 기점으로 결제가 이루어 지며 해당 펀딩의 성공 유무에 따라
결제 여부가 정해지게 되어 있었다. 

- 즉, 일반적인 결제를 하는게 아니라 예약, 에스크로 결제 방식을 사용 해야 된다.


이로 인해 paypal, iamport 등 여러 pg결제 모델의 예시를 찾기 시작햇다.

## paypal의 문제

paypal의 경우 해외결제를 기반으로 설정이 되있어서 국내에서 테스트 및 사용하기 어려움이 있었다

테스트 모델을 사용함에 있어도 해외결제를 기반으로 해야 햇기 때문이다.

결국 결제모듈 까지의 연결은 성공 햇으나 추가 기능의 구현에 막힘이 존재 햇다.

## iamport로의 변경

결국 국내에서 많이 사용하는 iamport로 눈을 돌리게 되었다.

공식 api문서를 보았을때 해당 기능들을 모두 지원하고 있었다.

결국, 예약 결제 시스템을 구현하게 되었는데 방식은 빌링키를 발급받고 해당 키를 통해 스케쥴러를 등록하여

해당일에 결제를 해달라는 예약 메세지를 iamport쪽으로 전달하여 결제를 예약하는 방식으로 구성하게 되었다.




